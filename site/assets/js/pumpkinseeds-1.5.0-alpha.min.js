/*! PKS v1.5.0-alpha | pumpkinseeds 2013-12-17 | (c) 2010 Nichole Shannon && NikkiDreams */

var pks=Class.create(!0),_pksTi=0;pks.namespace("core"),pks.core={init:function(){pks.core.controller.setConstants(),$(document).ready(function(){pks.core.controller.events.domReady()})},config:null,model:{isDomReady:!1,isClassReady:!1,isPksCoreActive:!1,isModelReady:!1,jsonResponse:null,pksLogQueue:null},controller:{setConstants:function(){var a=pks.core.constants},events:{domReady:function(){pks.core.model.isDomReady=!0,$(document).trigger("pks.dom:isReady")},configIsReady:function(){pks.core.model.isClassReady=!0,$(document).trigger("pks.core.config:isReady"),"undefined"!=typeof $(pks.core.config.init_logger)&&$(pks.core.config.init_logger).length>0&&(pks.core.config.isLogger=!0),pks.core.api.logger("Event: pks.core.config:isReady"),pks.core.controller.events.coreIsReady()},coreIsReady:function(){pks.core.model.isPksCoreActive=!0,pks.core.api.logger("Event: pks.core:isReady"),$(document).trigger("pks.core:isReady"),pks.core.controller.events.librariesReady(),pks.core.controller.events.corePageData()},librariesReady:function(){"object"==typeof Backbone&&(pks.templates.model.isBackboneReady=!0,pks.core.api.logger("Library: pks.library:isBackbone"),$(document).trigger("pks.library:isBackbone")),"object"==typeof Handlebars&&(pks.templates.model.isHandlebarsReady=!0,pks.core.api.logger("Library: pks.library:isHandlebars"),$(document).trigger("pks.library:isHandlebars")),"object"==typeof Modernizr&&(pks.templates.model.isModernizrReady=!0,pks.core.api.logger("Library: pks.library:isModernizr"),$(document).trigger("pks.library:isModernizr")),"object"==typeof html5&&(pks.templates.model.isHtml5Ready=!0,pks.core.api.logger("Library: pks.library:isHtml5"),$(document).trigger("pks.library:isHtml5")),"object"==typeof _jsv&&(pks.templates.model.isTemplatesReady=!0,pks.core.api.logger("Library: pks.library:isJsRender"),$(document).trigger("pks.library:isJsRender"))},corePageData:function(){setTimeout(function(){pks.core.controller.getCorePageData()},1e3)},corePageDataReady:function(){pks.core.model.isCorePageDataReady=!0},getCorePageDataHandler:{success:function(){$(document).trigger("pks.core.data:end"),pks.core.api.logger("Event: pks.core.data:end")},complete:function(){pks.core.model.isModelReady=!0,$(document).trigger("pks.core:isModelReady"),pks.core.api.logger("Event: pks.core:isModelReady");var a=pks.core.model.jsonResponse;pks.core.model.jsonResponse=a},exception:function(){pks.core.model.isModelReady=!1,$(document).trigger("pks.core.data:end"),pks.core.api.logger("ERROR: Bad Seeds, PKS Core AJAX Request Failed. "+pks.core.model.jsonResponse)}}},getCorePageData:function(){$(document).trigger("pks.core.data:begin"),pks.core.api.logger("Event: pks.core.data:begin");var a=pks.core.controller.getPksCoreURL(),b="";a!==!1&&$.getJSON(a).success(function(){pks.core.controller.events.getCorePageDataHandler.success()}).complete(function(a,b){pks.core.model.jsonResponse=$.parseJSON(a.responseText),pks.core.controller.events.getCorePageDataHandler.complete()}).error(function(a,b,c){pks.core.model.jsonResponse=c,pks.core.controller.events.getCorePageDataHandler.exception()})},getPksCoreURL:function(){var a=pks.core.config.constants.PUMPKINSEEDS_REST_URL,b=pks.core.config.constants.PUMPKINSEEDS_JSON_DATA,c=pks.core.config.requestParameters,d=window.location.host,e="http:",f;return e="http:"===window.location.protocol?"http:":"https:",f=e+"//"+d+a+b,pks.core.api.logger("INFO: pks.core data url: "+f),f?f:!1}},api:{getFormatedTime:function(){var a=new Date,b=a.getHours(),c=a.getMinutes(),d=a.getSeconds(),e=a.getMilliseconds();return 10>b&&(b="0"+b),10>c&&(c="0"+c),10>d&&(d="0"+d),10>e&&(e="0"+e),b+":"+c+":"+d+":"+e},logger:function(a){console.log("PKSLog: ",a,pks.core.model.isClassReady,(new Date).getTime()),pks.core.model.isClassReady&&pks.core.config.isLogger&&($(pks.core.config.init_logger).prepend('<div class="log info">'+_pksTi+" : "+a+" : "+pks.core.api.getFormatedTime()+"</div>"),_pksTi++)}}},pks.core.init(),$.fn.exists=function(){return jQuery(this).length>0},pks.namespace("core.config"),pks.core.config={init_logger:"#init_logger",isLogger:!1,isCurrentUser:!1,init:function(){pks.core.model.isPksCoreActive?pks.core.controller.events.configIsReady():$(document).on("pks.dom:isReady",function(){pks.core.controller.events.configIsReady()})},constants:{PUMPKINSEEDS_REST_URL:"/assets/data/",PUMPKINSEEDS_JSON_DATA:"seeds.json",JSON_ROOT_NODE:"",requestParameters:{PKS_PARAMETER:"pks",USER_PARAMETER:"pksuser"}}},pks.core.config.init(),pks.namespace("api"),pks.api={init:function(){pks.core.model.isClassReady?pks.api.controller.events.classIsReady():$(document).on("pks.core:isReady",function(){pks.api.controller.events.classIsReady()})},constants:{requestParameters:{},en_us:{},pks_base_container:"#pks_core_container"},model:{isClassReady:!1,isModelReady:!1,jsonResponse:null,isFormValid:!1},controller:{events:{classIsReady:function(){$(document).trigger("pks.api:isReady"),pks.api.model.isClassReady=!0,pks.core.api.logger("Event: pks.api:isReady"),$(document).on("pks.core:isModelReady",function(){pks.api.prependApiDataObject(pks.core.model.jsonResponse)})}}},validation:null,getQueryParameters:function(){var a=pks.core.config.constants.requestParameters;return pks.core.config.constants.formatedParamters=null,pks.core.config.constants.queryParameters=[],pks.core.config.constants.userParameters=null,pks.core.config.constants.formatedParamters},getPksCoreURL:function(){var a=pks.core.config.constants.PUMPKINSEEDS_REST_URL,b,c=window.location.host,d="http:",e,f;return d="http:"===window.location.protocol?"http:":"https:",e=d+"//"+c+a+"/"+b,f=pks.api.getQueryParameters(),null!==f&&(e=e+"?"+f),e},createViewContainer:function(a,b,c){var d=c?c:"#top_section",e=a?a:"pks_core_container",f=b?" "+b:"",g='				<section class="container'+f+'" id="'+e+'">					<div class="row"></div>				</section>';return $(d).exists()&&!$("#"+e).exists()?($(d).after(g),!0):$(d).exists()?!0:!1},prependApiDataObject:function(a){var b={API:a.API,version:a.version,seed_name:pks.core.config.constants.PUMPKINSEEDS_JSON_DATA,geolocation:JSON.stringify(a.geolocation.country.USA.states),identity:JSON.stringify(a.user.identity),orientation:JSON.stringify(a.user.orientation),status:JSON.stringify(a.user.status),contentId:"api_json_data",extraStyle:""},c=$.templates(pks.templates.PKS_API_DATA_SAMPLE_SECTION),d=c.render(b),e="pks_core_examples",f=pks.api.createViewContainer(e,null,null);$("#"+e+" > .row:first-child").prepend(d),pks.core.api.logger("API: pks.prependApiDataObject")}},$.fn.serializeObject=function(){var a={},b=this.serializeArray();return $.each(b,function(){a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""}),a},function(a){a.getUrlVar=function(a){var b=new RegExp(a+"=([^&]*)","i").exec(window.location.search),c=decodeURI(b[1])||"";return b+c}}(jQuery),pks.api.init(),pks.namespace("templates"),pks.templates={init:function(){pks.api.model.isClassReady?pks.templates.controller.events.classIsReady():$(document).on("pks.api:isReady",function(){pks.templates.controller.events.classIsReady()})},model:{isClassReady:!1,isModelReady:!1,isTemplatesReady:!1},controller:{setTemplates:function(){pks.templates.model.isTemplatesReady&&$.templates({pksTemplate:pks.templates.PKS_TEMPLATE})},events:{classIsReady:function(){$(document).trigger("pks.templates:isReady"),pks.templates.model.isClassReady=!0,pks.core.api.logger("Event: pks.templates:isReady"),pks.templates.controller.events.templatesReady()},templatesReady:function(){"object"==typeof _jsv&&(pks.templates.model.isTemplatesReady=!0,pks.core.api.logger("Event: pks.templates:isTemplatesReady"),$(document).trigger("pks.templates:isTemplatesReady"),pks.templates.controller.setTemplates())}}},PKS_TEMPLATE:"<div>SOME HTML FRAGMENT</div>",PKS_API_DATA_SAMPLE_SECTION:'		<div class="col-md-10 {{: extraStyle }}" id="{{: contentId }}">			<div class="content">				<h2>PKS Core JSON Response</h2> 				<label>API Name: {{: API }}</label>				<label>API Version: {{: version }}</label>				<h5>Sample Data: {{: seed_name }}</h5>				<label>data.geolocation.country.USA.states:<br/><pre>{{: geolocation }}</pre></label>				<label>data.user.identity:<br/><pre>{{: identity }}</pre></label>				<label>data.user.orientation:<br/><pre>{{: orientation }}</pre></label>				<label>data.user.status:<br/><pre>{{: status }}</pre></label>			</div>		</div>',PKS_LASTFM_CURRENT_SONG_PLAYING:'		<div class="col-md-5 {{: extraStyle }}" id="{{: contentId }}">			<div class="nowplaying content  clearfix">		        <div class="nowPlayingBg cssBGfilters full-width-overlay">		            <div class="art" style="background-image: url({{: tracks[0].images.extralarge}});"></div>		        </div>		        <div class="track-details-wrapper" data-utc="{{: tracks[0].utc}}">	                <div class="track-details">	                    <a class="artwork media-pull-left media-link-hook" href="{{: tracks[0].url}}">	                        <img src="{{: tracks[0].images.mega}}" alt="Artwork for {{: tracks[0].name}}" />	                    </a>	                    <div class="media-body">                            <div class="vertically-center track-meta">                                <h3 class="now-playing-subtext">                                    <a href="{{: _meta.subject.url}}" class="strong">{{: _meta.subject.name}}</a> is playing                                    <a href="{{: _meta.subject.url}}" class="strong hide">{{: _meta.subject.name}}</a> <span class="hide">just played</span>                                    <a href="{{: _meta.subject.url}}" class="strong hide">{{: _meta.subject.name}}</a> <span class="hide">last played</span>                                </h3>                                <a href="{{: tracks[0].url}}" class="track-name">{{: tracks[0].name}}</a>                                <div class="artist-name">                                    by <a href="{{: tracks[0].artist.url}}">                                        {{: tracks[0].artist.name}}                                    </a>                                </div>                                <div class="album-name">                                    {{: tracks[0].album.name}}                                </div>                            </div>	                    </div>	                </div>		        </div>		        <div data-page-title class="hide">		            {{: tracks[0].name}} by {{: tracks[0].artist.name}} (now playing)		            {{: tracks[0].name}} by {{: tracks[0].artist.name}} (just listened)		            {{: tracks[0].name}} by {{: tracks[0].artist.name}} (last played track)		            No recent tracks - Last.fm		        </div>		        <div class="no-content-message hide">		            Sorry, {{: _meta.subject.name}} hasn\u2019t played any tracks recently.<br /><a href="{{: _meta.subject.url}}">Return to their profile</a>.		        </div>		    </div>	    </div>'},pks.templates.init(),pks.namespace("lastfm"),pks.lastfm={init:function(){pks.core.model.isClassReady?pks.lastfm.controller.events.classIsReady():$(document).on("pks.api:isReady",function(){pks.lastfm.controller.events.classIsReady()})},constants:{requestParameters:{},en_us:{}},model:{isClassReady:!1,isModelReady:!1,jsonResponse:null,isFormValid:!1},controller:{events:{classIsReady:function(){$(document).trigger("pks.lastfm:isReady"),pks.api.model.isClassReady=!0,pks.core.api.logger("Event: pks.lastfm:isReady"),pks.lastfm.view.init()}}},validation:null,getLastfmAPI:function(a,b){var c=a?a:"api/lastfmapi",d=b?b:"nowplaying.php/nikkidreams",e="http:",f=window.location.host,g,h=null;e="http:"===window.location.protocol?"http:":"https:",g=e+"//"+f+"/"+c+"/"+d,$.get(g).done(function(a){pks.lastfm.model.jsonRespnse=a,$(document).trigger("pks.lastfm:dataResponse:Ready")})},view:{init:function(){pks.lastfm.view.displayCurrentSongPlaying()},displayCurrentSongPlaying:function(a){pks.lastfm.getLastfmAPI(),$(document).on("pks.lastfm:dataResponse:Ready",function(){var a={_meta:{subject:{_type:"user",is_music:!1,name:"NikkiDreams",url:"/user/NikkiDreams"},url:"/user/NikkiDreams/now"},tracks:pks.lastfm.model.jsonRespnse,contentId:"lastfm_current_song",extraStyle:"col-md-offset-1 relative"},b=$.templates(pks.templates.PKS_LASTFM_CURRENT_SONG_PLAYING),c=b.render(a),d="pks_core_examples",e=pks.api.createViewContainer(d,null,null);$("#"+d+" > .row:first-child").append(c)})}}},pks.lastfm.init();
//# sourceMappingURL=pumpkinseeds.min.map